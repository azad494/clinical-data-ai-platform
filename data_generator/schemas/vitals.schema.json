{
  "dataset": "vitals",
  "description": "Encounter-linked time-series vitals events (Phase 2A MVP event model).",
  "primary_key": ["encounter_id", "event_time", "vital_type"],
  "foreign_keys": [
    { "field": "encounter_id", "references": "encounters.encounter_id" },
    { "field": "patient_id", "references": "patients.patient_id" }
  ],
  "fields": [
    { "name": "encounter_id", "type": "int", "required": true, "description": "Primary anchor FK to encounters.encounter_id." },
    { "name": "patient_id", "type": "int", "required": true, "description": "Secondary anchor FK to patients.patient_id; must match the patient on the referenced encounter." },
    { "name": "event_time", "type": "datetime", "required": true, "format": "iso8601", "description": "Vitals event timestamp; must be within encounter admit/discharge window." },
    {
      "name": "vital_type",
      "type": "string",
      "required": true,
      "constraints": { "enum": ["heart_rate", "resp_rate", "temperature_c", "spo2", "systolic_bp", "diastolic_bp"] },
      "description": "Type of vital sign captured for the event."
    },
    { "name": "value", "type": "float", "required": true, "description": "Numeric measurement value for the given vital_type." },
    {
      "name": "unit",
      "type": "string",
      "required": true,
      "constraints": { "enum": ["bpm", "breaths/min", "C", "%", "mmHg"] },
      "description": "Measurement unit for value."
    },
    {
      "name": "source",
      "type": "string",
      "required": false,
      "constraints": { "enum": ["monitor", "manual"] },
      "description": "Capture source for the vitals reading."
    }
  ],
  "constraints": [
    { "rule": "event_time BETWEEN encounters.admit_time AND encounters.discharge_time", "description": "Rule note: event_time must be within the encounter window." },
    { "rule": "vitals.patient_id = encounters.patient_id for the referenced encounter_id", "description": "Rule note: patient_id on vitals must match patient_id on encounters." }
  ],
  "relationships": {
    "references": [
      { "dataset": "encounters", "field": "encounter_id" },
      { "dataset": "patients", "field": "patient_id" }
    ]
  ],
  "file_format": {
    "type": "csv",
    "expected_filename": "vitals.csv"
  }
}
